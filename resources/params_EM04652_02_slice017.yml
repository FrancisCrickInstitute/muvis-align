general:
  show_original: True
  metadata_summary: False
  chunk_size: [4096, 4096]
  break_on_error: True
  logging:
    filename: log/muvis-align-empiar12193.log
    format: '%(asctime)s %(levelname)s: %(message)s'
    dask: True
    time: True
    verbose: True
  output:
    clear: False
    overwrite: True
    format: ome.zarr
    tile_size: [4096, 4096]
    compression:
    npyramid_add: 4
    pyramid_downsample: 2
    thumbnail: ome.zarr
    thumbnail_scale: 32

operations:
  - operation: register match s
    #input: /nemo/project/proj-mrc-mm/raw/em/EM04652/EM04652_02_slice017/EM04652-02_slice17_spaghettiandmeatballs2
    input: D:/slides/EM04652-02_slice17_spaghettiandmeatballs2/**/*_s00823.ome.tif
    #input: D:/slides/EM04652-02_slice17_spaghettiandmeatballs2/tiles_s00400/*.ome.tif
    #source_metadata: {scale: {x: 0.032, y: 0.032}, position: {y: 'fn[-3]*24', x: 'fn[-2]*24'}}
    source_metadata: {rotation: -40.51368871, is_center: True, global: True, norm: True}
    normalisation: global
    source_metadata: {'sbem': True, scale: {x: 0.01, y: 0.01}}
    use_orthogonal_pairs: True
    method: phase_correlation
    transform_type: translation
    output: ../../stitched/slice{s}/

#  - operation: stack
#    #input: /nemo/project/proj-mrc-mm/raw/em/EM04652/EM04652_02_slice017/EM04652-02_slice17_spaghettiandmeatballs2s/titched/slice*/registered.ome.zarr
#    input: D:/slides/02_slice17_spaghettiandmeatballs2/stitched/slice*/registered.ome.zarr
#    source_metadata: source
#    extra_metadata: {scale: {z: 0.1}}
#    method: phase_correlation
#    output: ../../aligned/
