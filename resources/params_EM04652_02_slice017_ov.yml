general:
  show_original: True
  metadata_summary: False
  chunk_size: [4096, 4096]
  break_on_error: True
  logging:
    filename: log/muvis-align-EM04652-ov.log
    format: '%(asctime)s %(levelname)s: %(message)s'
    dask: True
    time: True
    verbose: False
  output:
    clear: False
    overwrite: False
    format: ome.zarr
    tile_size: [4096, 4096]
    compression:
    npyramid_add: 4
    pyramid_downsample: 2
    thumbnail: ome.zarr
    thumbnail_scale: 16

operations:
  - operation: stack
    input: /nemo/project/proj-mrc-mm/raw/em/EM04652/EM04652_02_slice017/EM04652-02_slice17_spaghettiandmeatballs2/overviews/ov000/*.ome.tif
    #input: D:/slides/EM04652-02_slice17_spaghettiandmeatballs2/overviews/ov000/*.ome.tif
    #input:
    #- D:/slides/EM04652-02_slice17_spaghettiandmeatballs2/overviews/ov000/EM04652-02_slice17_spaghettiandmeatballs2_ov000_s00000.ome.tif
    #- D:/slides/EM04652-02_slice17_spaghettiandmeatballs2/overviews/ov000/EM04652-02_slice17_spaghettiandmeatballs2_ov000_s00001.ome.tif
    #source_metadata: sbemimage
    source_metadata: {'position': {'y': 0, 'x': 0}}
    extra_metadata: {scale: {z: 0.05}}
    transform_type: affine
    #method: phase_correlation
    method:
      name: orb
      gaussian_sigma: 2.5
      max_keypoints: 5000
      inlier_threshold_factor: 0.05
      max_trials: 1000
      ransac_iterations: 3
    output_spacing: mean
    n_parallel_pairwise_regs: 64
    output: ../../aligned_ov/
